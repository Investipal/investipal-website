---
// StandardCard Component - Uses Design System Tokens for consistency
import StandardBadge from './StandardBadge.astro';
import { designSystem } from '../../data/designSystem';

export interface Props {
  title: string;
  excerpt: string;
  image: string;
  imageAlt: string;
  href: string;
  category?: string;
  featured?: boolean;
  meta?: string; // Date, duration, author, etc.
  size?: 'small' | 'medium' | 'large';
  showCategoryBadge?: boolean;
  showFeaturedBadge?: boolean;
  className?: string;
}

const { 
  title, 
  excerpt, 
  image, 
  imageAlt, 
  href, 
  category,
  featured = false,
  meta,
  size = 'medium',
  showCategoryBadge = true,
  showFeaturedBadge = true,
  className = ''
} = Astro.props;

// Size variants
const sizeClasses = {
  small: 'h-40',
  medium: 'h-48', 
  large: 'h-64'
};

const imageHeight = sizeClasses[size];
---

<!-- 
  STANDARD CARD COMPONENT
  
  Unified card design for consistent experience across blog, podcast, and other content.
  Follows design system patterns with standardized hover effects and badges.
  
  Usage:
  <StandardCard 
    title="Post Title"
    excerpt="Post description..."
    image="/image.jpg"
    imageAlt="Image description"
    href="/blog/post-slug"
    category="Technology"
    meta="March 15, 2024"
  />
-->
<article class={`${designSystem.components.cardHover} group relative ${className}`}>
  <div class="relative">
    <!-- Featured Badge -->
    {showFeaturedBadge && featured && (
      <div class="absolute top-4 left-4 z-10">
        <StandardBadge text="Featured" variant="small" />
      </div>
    )}
    
    <!-- Category Badge -->
    {showCategoryBadge && category && (
      <div class="absolute top-4 left-4 z-10">
        <StandardBadge text={category} variant="category" />
      </div>
    )}
    
    <!-- Featured Image -->
    <div class="relative overflow-hidden">
      <a href={href} class="card-link">
        <img 
          src={image} 
          alt={imageAlt}
          class={`w-full ${imageHeight} object-cover group-hover:scale-105 transition-transform duration-300`}
          loading="lazy"
        />
      </a>
      <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
    </div>
  </div>
  
  <div class="p-6">
    <!-- Title -->
    <h3 class={`${designSystem.typography.featureTitle} mb-3 line-clamp-3 group-hover:text-investipal-600 transition-colors`}>
      <a href={href} class="card-title-link">
        {title}
      </a>
    </h3>
    
    <!-- Excerpt -->
    <p class={`${designSystem.text.secondary} mb-4 line-clamp-3 leading-relaxed`}>
      {excerpt}
    </p>
    
    <!-- Meta Information -->
    {meta && (
      <div class="flex items-center justify-between pt-4 border-t border-gray-100">
        <div class="text-sm text-gray-500">
          {meta}
        </div>
      </div>
    )}
  </div>
</article>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .card-link, .card-title-link {
    text-decoration: none;
    color: inherit;
  }
  
  .card-link:hover, .card-title-link:hover {
    text-decoration: none;
    color: inherit;
  }
  
  /* Make the entire card clickable */
  article:hover {
    cursor: pointer;
  }
  
  .card-link::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
  }
</style>
